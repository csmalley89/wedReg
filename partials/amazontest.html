
  $scope.create = () => {
    //Make sure the trip has a name! Otherwise, a trip will be created and now show up in the dropdown menu
    if ($scope.trip.name !== ""){

      TripFactory.createTrip($scope.trip)
      .then((tripData)=>{
        //The double quotes around the trip id are messing up the routing so I needed to replace any double quotes with nothing
        tripId = tripData.name.replace('"', "");
        $window.location.href = `#/parks/trip/${tripId}`;
        let memberObj = {
          uid: AuthFactory.getUserId(),
          role: 'creator',
          tripId: tripId
        }
        return MemberFactory.addMember(memberObj)
      })
      .then((success)=>{
        console.log("member created successfully");
      })

    } else {
      $scope.showAlert = true;
    }
  };




WORKING VERSION
  $scope.coupleRegister = ()=>{
    console.log("You clicked register!");
    AuthFactory.createUser({
      email: $scope.account.email,
      password: $scope.account.password
    })
    .then((userData)=>{
      let userObj = {
        email: userData.email,
        uid: userData.uid,
      }
      AuthFactory.saveUserToFirebase(userObj)
      RegistryFactory.createRegistry($scope.registry)
      .then((registryData)=>{
        registryId = registryData.name;
        let memberObj = {
          uid: AuthFactory.getUserId(),
          registryId: registryId,
          role: 'couple',
        }
        MemberFactory.addMember(memberObj)
        if (registryData) {
          $window.location.href = "#/registry/addgifts";
        } else {
          $window.location.href = "#/";
        }
      })
    }, (error)=>{
      console.log(`Error creating user ${error}`);
    });
  };














